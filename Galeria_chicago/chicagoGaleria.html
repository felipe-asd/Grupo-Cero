<!doctype html>
<html lang="en">
  <head>
    <title>ChicagoGaleria</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
  
    <link rel="stylesheet" href="estilo.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    

    <script>
      //scrip busqueda por id
        //https://api.artic.edu/api/v1/artworks/artworks/{id}
        //https://api.artic.edu/api/v1/artworks/27992?fields=id,title,image_id


        var url = "https://www.artic.edu/iiif/2/";

        //https://www.artic.edu/iiif/2/{id}/

        // /full/843,/0/default.jpg

        $(document).ready(function(){
            $("#btnBusca").click(function(){
                var quearyBusqueda = document.getElementById('quearyBusqueda').value
                //console.log(quearyBusqueda);
                //https://api.artic.edu/api/v1/artworks/search?q=cats&query[term][is_public_domain]=true
                $.get(`https://api.artic.edu/api/v1/artworks/search?q=${quearyBusqueda}`,function(data){

                    console.log(data.data);
                    $.each(data.data,function(i,item){
                        var urlApiLink = item.api_link;
                        //console.log(urlApiLink);
                        $.get(`${urlApiLink}`,function(data){
                            //console.log(data.data.id);
                            var urlImagen = url.concat(data.data.image_id, '/full/843,/0/default.jpg');
                            //console.log(urlImagen);
                          })
                            var carta = `<div class="card my-3 mx-5" style="width: 18rem;">
                                      <img src="${item.urlImagen}" class="card-img-top" alt="${item.title}">
                                      <div class="card-body">
                                        <h5 class="card-title">${item.title}</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>                                       
                                      </div>
                                    </div>`    
                            $("#ContenedorCartas").append(carta);
                          })
                        
                        

                    })

                })

            })
        
    </script>


</head>
  <body>
    


    <div class="main">
        <div class="row">
            
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Busca por queary" id="quearyBusqueda">
                <div class="input-group-append">
                  <button class="btn btn-secondary" type="button" id="btnBusca">
                    <i class="fa fa-search"></i>
                  </button>
                </div>
              </div>

        </div>
    </div>

    <div class="centrada">
        <div class="row">
          <div class="col" id="galeria">

          </div>
        </div>
      </div>
      
      <div class="row" id="ContenedorCartas">
      
      </div>
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</body>
</html>